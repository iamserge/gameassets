App=App||{},App.Homepage=App.Homepage||{},App.Homepage.Recommendations=new function(){$(document).ready(function(){})},App.Homepage.CommunityGenerator=function(){var a="//img.game.co.uk/salmon/newHomepage/community.js",b=$("#chooseFranchise"),c=$("section.community .franchiseContainer"),d=c.find(".mainBoxes"),e=c.find(".medBoxes"),f={},g=function(a,b){var c=$("<a />",{"class":a,html:"<span>"+b.title+'</span><img src="'+b.img+'" alt="'+b.title+'" />',href:b.link});return c},h=function(a,b){if("undefined"==typeof f[a])f[a]=g(a,b),f[a].appendTo(a.indexOf("medBox")==-1?d:e);else{var c=f[a];c.attr("href",b.link).show(),c.find("span").text(b.title),c.find("img").attr("src",b.img).attr("alt",b.title)}0===b.img.length&&f[a].hide()},i=function(a){for(var b in a.boxes)h(b,a.boxes[b])},j=function(){var a=HomeFranchises[Object.keys(HomeFranchises)[0]];for(var c in HomeFranchises){var d=HomeFranchises[c].title;b.append('<option value="'+c+'">'+d+"</option>")}i(a)},k=function(){b.on("change",function(){var a=b.val();i(HomeFranchises[a])})},l=function(){j(),k()};if("undefined"==typeof HomeFranchises){var m=document.createElement("script");m.type="text/javascript",m.src=a,m.onload=function(){"undefined"!=typeof HomeFranchises&&l()},document.body.appendChild(m)}else l()},Salmon.Global.FeatureToggles.getFeature("NewHOMEPAGE")&&App.Homepage.CommunityGenerator(),App.Homepage.VideoSlider=function(){var a={transitionDuration:300,pager:!1,playVideoButtonClass:"playVideoButton",closeVideoButtonClass:"closeVideo",defaultSwipeParams:{triggerOnTouchEnd:!0,allowPageScroll:"horizontal",threshold:175,excludedElements:[]}},b={windowWidth:$(window).width(),speed:5e3,isAnimating:1},c=function(b){this.options=$.extend({},a,b),this.sliderCurrentPosition=0,this.currentSlide=0,this.isAnimating=!1,this.init(),this.interacted=!1},d=c.prototype;return d.init=function(){this.setupElements(),this.setupWidths(),this.setupPager(),this.initiateVideo(),this.setupAutoScroll(),this.setupClone(),this.setupEvents()},d.setupClone=function(){this.$elements.firstClone=this.$elements.slides.eq(0).clone(),this.$elements.firstClone.addClass("clone").appendTo(this.$elements.slidesContainer),this.$elements.lastClone=this.$elements.slides.eq(this.maxSlides-1).clone(),this.$elements.lastClone.addClass("clone").prependTo(this.$elements.slidesContainer),this.$elements.slidesContainer.width(this.wWidth*(this.maxSlides+2)),this.$elements.slidesContainer.css("left",this.wWidth*-1)},d.setupElements=function(){this.$elements={},this.$elements.window=$(window),this.$elements.mainContainer=$(this.options.elements.sliderContainer),this.$elements.slidesContainer=this.$elements.mainContainer.find(".slides"),this.$elements.slides=this.$elements.slidesContainer.find(".slide"),this.$elements.sliderControlPrev=this.$elements.mainContainer.find(".carouselPrev"),this.$elements.sliderControlNext=this.$elements.mainContainer.find(".carouselNext"),this.maxSlides=this.$elements.slides.length},d.setupWidths=function(){this.wWidth=this.$elements.window.width(),this.$elements.slides.width(this.wWidth),this.scrollStep=this.wWidth},d.setupEvents=function(){var a=this;this.$elements.sliderControlNext.bind("click",function(){a.isAnimating||(a.currentSlide++,a.moveSlider(),a.stopAutoScroll(),a.setInteracted())}),this.$elements.sliderControlPrev.bind("click",function(){a.isAnimating||(a.currentSlide--,a.moveSlider(),a.stopAutoScroll(),a.setInteracted())}),this.$elements.window.on("resize",function(){a.setupWidths(),a.$elements.firstClone.width(this.wWidth)}),this.$elements.slidesContainer.find(".slide").on("click",function(a){var b=$(this),c=b.data("href");"undefined"!=typeof c&&c.length>0&&a.target==this&&(window.location.href=c)}),this.$elements.mainContainer.on("mouseenter",function(){a.stopAutoScroll()}),this.$elements.mainContainer.on("mouseleave",function(){a.interacted||0!==a.autoScrollInterval||a.setupAutoScroll()}),$(document).on("click","."+a.options.playVideoButtonClass,function(b){b.preventDefault(),b.stopPropagation();var c=$(this).parent();a.setInteracted(),a.startVideo(c.data("limelightvideo"))}),$(document).on("click","."+a.options.closeVideoButtonClass,function(b){b.preventDefault(),b.stopPropagation(),a.closeVideo()}),$(document).on("click",".sliderContainer .pager li",function(){if(!a.isAnimating){var b=$.inArray(this,$(".sliderContainer .pager li"));a.currentSlide=b,a.moveSlider(),a.stopAutoScroll(),a.setInteracted()}}),a.options.defaultSwipeParams.swipe=function(b,c,d,e,f,g){a.swiped(c,d,e,f,g)},a.$elements.slidesContainer.swipe(a.options.defaultSwipeParams)},d.swiped=function(a){var b=this;if(!b.isAnimating){switch(a){case"left":b.currentSlide++;break;case"right":b.currentSlide--}b.moveSlider(),b.stopAutoScroll(),b.interacted=!0}},d.startVideo=function(a){"undefined"!=typeof this.LimelightPlayer?(this.LimelightPlayer.doLoadChannel(a,!0),this.$elements.limelightContainer.addClass("visible")):(this.$elements.limelightContainer.addClass("visible"),this.autoPlayLimelightID=a)},d.initiateLimelight=function(){var a=this;window.limelightPlayerCallback=function(b,c){var d="limelight_player_156792";a.LimelightPlayer=LimelightPlayer,"onPlayerLoad"==c&&(LimelightPlayer.registerPlayer(d),"undefined"!=typeof a.autoPlayLimelightID&&this.LimelightPlayer.doLoadChannel(a.autoPlayLimelightID,!0)),"onChannelLoad"!=c&&"onMediaLoad"!=c||a.videoInitiated()}},d.closeVideo=function(){this.LimelightPlayer.doPause(),this.$elements.limelightContainer.removeClass("visible")},d.setupLimelightTrigger=function(a){var b=this;a.append('<a href="#" class="'+b.options.playVideoButtonClass+'">Play Video</a>'),b.$elements.limelightContainer=b.$elements.mainContainer.find(".limeLightContainer")},d.initiateVideo=function(){var a=this;this.$elements.slides.each(function(){var b=$(this).data("limelightvideo");"undefined"!=typeof b&&(a.initiateLimelight(),a.setupLimelightTrigger($(this)))})},d.moveSlider=function(){var a=this;if(!this.isAnimating){this.adjustCurrentSlide(),this.isAnimating=!0;var b={left:this.currentSlide==-1?0:(this.currentSlide+1)*this.scrollStep*-1};this.$elements.slidesContainer.animate(b,this.options.transitionDuration,function(){a.isAnimating=!1,a.currentSlide==a.maxSlides&&(a.$elements.slidesContainer.css("left",a.wWidth*-1),a.currentSlide=0),a.currentSlide==-1&&(a.$elements.slidesContainer.css("left",a.wWidth*a.maxSlides*-1),a.currentSlide=a.maxSlides-1)}),a.currentSlide!=a.maxSlides?(this.$elements.pager.find("li").removeClass("active"),this.$elements.pager.find("li").eq(this.currentSlide).addClass("active")):(this.$elements.pager.find("li").removeClass("active"),this.$elements.pager.find("li").eq(0).addClass("active"))}},d.setupAutoScroll=function(){var a=this;a.autoScrollInterval=setInterval(function(){a.currentSlide++,a.moveSlider()},b.speed)},d.stopAutoScroll=function(){var a=this;"undefined"!=typeof a.autoScrollInterval&&(clearInterval(a.autoScrollInterval),a.autoScrollInterval=0)},d.resetSlider=function(){this.setupElements(),this.setupWidths()},d.setInteracted=function(){var a=this;this.interacted=!0,clearTimeout(this.restartAutoTimeout),this.restartAutoTimeout=setTimeout(function(){a.$elements.limelightContainer.hasClass("visible")||(a.interacted=!1,a.setupAutoScroll())},5e3)},d.setupPager=function(){var a="",b=this.$elements.slides.length,c="active";if(b>1){for(var d=0;d<b;d++)0!==d&&(c=""),a+='<li class="'+c+'">&nbsp;</li>';var e='<div class="pager"><ul>'+a+"</ul></div>";this.$elements.mainContainer.prepend(e),this.$elements.pager=this.$elements.mainContainer.find(".pager")}},{newSlider:c}}();var videoSlider=new App.Homepage.VideoSlider.newSlider({fullWidth:!0,pager:!0,elements:{sliderContainer:".videoBanners"}});
//# sourceMappingURL=home.min.js.map